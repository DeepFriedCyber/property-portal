generator client {
  provider = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  extensions = [vector]
}

// Your models here...

model Property {
  id             String     @id @default(uuid())
  title          String
  description    String
  price          Float
  bedrooms       Int
  bathrooms      Int
  area           Float      // in square feet/meters
  location       String
  address        String
  lat            Float?     // latitude for mapping
  lng            Float?     // longitude for mapping
  images         String[]   // array of image URLs
  features       String[]   // array of property features
  councilTaxBand String?    // Council tax band (A-H)
  epcRating      String?    // Energy Performance Certificate rating
  tenure         String?    // Freehold, Leasehold, etc.
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt
  favorites      Favorite[]
}

model User {
  id        String     @id @default(cuid())
  clerkId   String     @unique
  email     String     @unique
  name      String?
  role      String?    // Optional: 'admin', 'user', etc.
  favorites Favorite[]
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
}

model Favorite {
  id         String   @id @default(uuid())
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId     String
  property   Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)
  propertyId String
  createdAt  DateTime @default(now())

  @@unique([userId, propertyId])
}

